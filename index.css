:root {
  /* --- Colors --- */
  --background-primary: #000000;
  --text-primary: #F5F5F7;
  --text-secondary: #A1A1A6;
  --accent-purple: hsl(265, 90%, 75%);
  --accent-green: hsl(145, 70%, 55%);
  --accent-red: hsl(0, 85%, 70%);
  --accent-yellow: hsl(45, 100%, 65%);
  --link-color: hsl(210, 100%, 75%);

  /* --- Glass Materials (FINAL - Bright & Translucent) --- */
  --glass-bg-panel: rgba(45, 45, 47, 0.5);   /* Increased transparency */
  --glass-bg-chrome: rgba(30, 30, 32, 0.4); /* Increased transparency */
  --glass-bg-modal: rgba(55, 55, 57, 0.6);  /* Increased transparency */
  --glass-bg-hover: rgba(65, 65, 67, 0.65);
  --glass-bg-active: rgba(110, 90, 130, 0.7);

  /* --- Core Liquid Glass Effect --- */
  --glass-backdrop-filter: url(#liquid-glass-advanced);

  /* --- Glass Edges & Depth (FINAL - Brighter & Crisper) --- */
  --glass-border-color: rgba(255, 255, 255, 0.3); /* Brighter border */
  --glass-sheen: inset 0 1.5px 1px 0 rgba(255, 255, 255, 0.4), inset 0 0 0 1.5px rgba(255, 255, 255, 0.2); /* Brighter sheen */
  --glass-shadow: 0 16px 50px rgba(0, 0, 0, 0.5);

  /* --- Other UI Elements --- */
  --separator-primary: rgba(255, 255, 255, 0.15);
  --separator-secondary: rgba(255, 255, 255, 0.1);
  --button-primary-bg: var(--accent-purple);
  --button-secondary-bg: rgba(80, 80, 80, 0.4);
  --button-secondary-hover-bg: rgba(100, 100, 100, 0.5);
  --button-danger-bg: var(--accent-red);
  --input-bg: rgba(30, 30, 30, 0.5);
  --input-border: rgba(255, 255, 255, 0.15);

  /* --- Z-Indexes --- */
  --z-header: 40;
  --z-sidebar-mobile: 50;
  --z-sidebar-mobile-backdrop: 49;
  --z-modal: 100;
  --z-notification: 110;
}

/* --- NEW, DYNAMIC MULTI-COLOR AURORA BACKGROUND --- */
@keyframes aurora-flow {
  0% { transform: translate(0, 0) rotate(0deg); }
  25% { transform: translate(5vw, -10vh) rotate(30deg); }
  50% { transform: translate(-5vw, 10vh) rotate(-30deg); }
  75% { transform: translate(10vw, 5vh) rotate(15deg); }
  100% { transform: translate(0, 0) rotate(0deg); }
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  background-color: var(--background-primary);
  color: var(--text-primary);
  overscroll-behavior: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow: hidden; /* Prevent body scroll */
  position: relative;
}

body::before {
  content: '';
  position: fixed;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  z-index: -1;
  background-image:
    radial-gradient(ellipse 30% 50% at 20% 30%, hsla(265, 90%, 65%, 0.5), transparent),
    radial-gradient(ellipse 30% 50% at 80% 20%, hsla(190, 90%, 55%, 0.5), transparent),
    radial-gradient(ellipse 30% 50% at 30% 80%, hsla(330, 85%, 60%, 0.45), transparent),
    radial-gradient(ellipse 30% 50% at 70% 90%, hsla(210, 95%, 60%, 0.45), transparent),
    radial-gradient(ellipse 30% 50% at 50% 50%, hsla(10, 85%, 60%, 0.4), transparent),
    radial-gradient(ellipse 30% 50% at 90% 70%, hsla(120, 70%, 55%, 0.4), transparent);
  animation: aurora-flow 60s ease-in-out infinite;
}


#root {
  height: 100vh;
  height: 100dvh;
  width: 100vw;
  overflow: hidden;
}

/* --- Base Panel Styling (Liquid Glass) --- */
.glass-panel, .glass-chrome, .modal-panel, .input-base, .button-secondary, .button-ghost, .progress-bar-track, .main-content-area-glass {
  border: 1px solid var(--glass-border-color);
  box-shadow: var(--glass-sheen), var(--glass-shadow);
  transition: background-color 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
  border-radius: 12px;
  /* Force application of the glass filter on all glass elements */
  backdrop-filter: var(--glass-backdrop-filter);
  -webkit-backdrop-filter: var(--glass-backdrop-filter);
}

.glass-panel { background-color: var(--glass-bg-panel); }
.glass-chrome { background-color: var(--glass-bg-chrome); }
.modal-panel { background-color: var(--glass-bg-modal); border-radius: 16px; }

/* FIX: New class for the main content area to ensure it's translucent */
.main-content-area-glass {
  background-color: rgba(28, 28, 30, 0.55);
  border: none;
  border-radius: 0;
  box-shadow: none;
}

.glass-panel-interactive:hover:not(.is-pomodoro-active) {
  background-color: var(--glass-bg-hover);
  border-color: rgba(255, 255, 255, 0.4);
}

/* --- Glow Effects & Active States --- */
.interactive-glow-border:hover,
.is-pomodoro-active {
  box-shadow: var(--glass-sheen), var(--glass-shadow), 0 0 15px -3px var(--accent-purple);
  border-color: var(--accent-purple) !important;
}
.is-pomodoro-active {
  background-color: var(--glass-bg-active) !important;
}
.scroller-highlight-glow {
  box-shadow: 0 0 15px -5px var(--accent-purple);
}

/* --- Scrollbar Styling --- */
::-webkit-scrollbar { width: 12px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb {
  background-color: rgba(255, 255, 255, 0.2);
  border-radius: 10px;
  border: 3px solid transparent;
  background-clip: content-box;
}
::-webkit-scrollbar-thumb:hover { background-color: rgba(255, 255, 255, 0.3); }
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

/* --- UI Chrome (FIXED) --- */
.glass-chrome {
  border-radius: 0;
  box-shadow: var(--glass-sheen); /* simplified shadow for chrome */
  border: none;
  border-bottom: 1px solid var(--separator-primary);
}

header.glass-chrome {
  border-bottom: 1px solid var(--separator-primary);
}

/* Specific fix for sidebar border */
aside.glass-chrome {
  border-bottom: none;
  border-right: 1px solid var(--separator-primary);
}


.border-\[\--separator-primary\] { border-color: var(--separator-primary) !important; }

.sidebar-content-area {
  padding: 1rem 1.25rem;
  padding-left: calc(1rem + env(safe-area-inset-left));
  padding-top: calc(1rem + env(safe-area-inset-top));
  padding-bottom: calc(1.5rem + env(safe-area-inset-bottom));
}

/* --- Buttons --- */
.button-base { border: none; cursor: pointer; -webkit-tap-highlight-color: transparent; user-select: none; }
.button-primary { background-color: var(--button-primary-bg); }
.button-primary:hover:not(:disabled) { background-color: color-mix(in srgb, var(--button-primary-bg), #fff 15%); }
.button-secondary { background-color: var(--button-secondary-bg); border: 1px solid var(--glass-border-color); }
.button-secondary:hover:not(:disabled) { background-color: var(--button-secondary-hover-bg); }
.button-danger { background-color: var(--button-danger-bg); }
.button-danger:hover:not(:disabled) { background-color: color-mix(in srgb, var(--button-danger-bg), #fff 15%); }
.button-ghost { background-color: transparent; box-shadow: none; border: none; }
.button-ghost:hover:not(:disabled) { background-color: rgba(191, 90, 242, 0.15); }

/* --- Inputs & Selections --- */
.input-base {
  width: 100%; padding: 0.5rem 0.75rem; background-color: var(--input-bg);
  border: 1px solid var(--input-border); border-radius: 0.5rem; color: var(--text-primary);
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}
.input-base:focus {
  outline: none; border-color: var(--accent-purple);
  box-shadow: 0 0 0 2px rgba(191, 90, 242, 0.3);
}

/* --- List Items & Selections --- */
.topic-list-item.is-dragging { background-color: color-mix(in srgb, var(--accent-purple), #000 50%); opacity: 1; }
.resource-card.is-selected { background-color: var(--glass-bg-active); border-color: var(--accent-purple); }
.resource-card.is-highlighted { background-color: color-mix(in srgb, var(--accent-yellow), transparent 85%); }

/* --- Progress Bar --- */
.progress-bar-track { background-color: rgba(0,0,0,0.2); }
.progress-bar-fill {
  background-image: linear-gradient(45deg, var(--accent-purple), color-mix(in srgb, var(--accent-purple), #fff 30%));
}

/* --- iOS Style Toggle Switch --- */
.ios-switch { position: relative; display: inline-block; width: 44px; height: 26px; }
.ios-switch input { opacity: 0; width: 0; height: 0; }
.ios-switch .slider {
    position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
    background-color: #3e3e42; transition: .4s; border-radius: 34px;
}
.ios-switch .slider:before {
    position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px;
    background-color: white; transition: .4s; border-radius: 50%;
}
.ios-switch input:checked + .slider { background-color: var(--accent-purple); }
.ios-switch.yellow input:checked + .slider { background-color: var(--accent-yellow); }
.ios-switch input:focus + .slider { box-shadow: 0 0 1px var(--accent-purple); }
.ios-switch input:checked + .slider:before { transform: translateX(18px); }

/* --- Utility --- */
.text-xxs { font-size: 0.65rem; line-height: 0.9rem; }

/* --- Printing Styles --- */
@media print {
  body { background-image: none; background-color: white; color: black; }
  .print\:hidden { display: none; } .hidden.print\:block { display: block; }
  @page { size: letter; margin: 0.75in; }
  .schedule-report-container { font-family: 'Times New Roman', Times, serif; font-size: 10pt; }
  .schedule-report-day { break-inside: avoid-page; }
  .new-week-page-break { break-before: page; }
}