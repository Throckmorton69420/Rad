body {
  font-family: 'Inter', sans-serif;
  background-color: var(--background-primary);
  /* Darker, slower, more vibrant "streaming" aurora effect */
  background-image: 
    radial-gradient(ellipse 50% 70% at 20% 40%, hsla(270, 90%, 60%, 0.18) 0px, transparent 50%),
    radial-gradient(ellipse 40% 60% at 80% 30%, hsla(190, 80%, 50%, 0.22) 0px, transparent 50%),
    radial-gradient(ellipse 50% 70% at 10% 90%, hsla(210, 90%, 60%, 0.15) 0px, transparent 50%),
    radial-gradient(ellipse 40% 60% at 90% 80%, hsla(330, 80%, 65%, 0.2) 0px, transparent 50%);
  background-size: 400% 400%;
  animation: aurora-bg 60s ease infinite;

  color: var(--text-primary);
  overscroll-behavior: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#root {
  height: 100vh;
  height: 100dvh; /* Dynamic viewport height */
  width: 100vw;
  overflow: hidden;
}


/* --- Base Panel Styling (Liquid Glass) --- */
.glass-panel, .glass-chrome, .modal-panel, .interactive-glow-border, .static-glow-border {
  background-color: var(--glass-bg-panel);
  -webkit-backdrop-filter: var(--glass-backdrop-filter);
  backdrop-filter: var(--glass-backdrop-filter);
  border: 1px solid var(--glass-border-color);
  box-shadow: var(--glass-sheen), var(--glass-shadow);
  transition: background-color 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
  border-radius: 12px;
}

/* Modifier for interactive panels to handle hover */
.glass-panel-interactive:hover:not(.is-pomodoro-active) {
  background-color: var(--glass-bg-hover);
  border-color: rgba(255, 255, 255, 0.25);
}

.glass-chrome, .modal-panel {
  background-color: var(--glass-bg-chrome);
}

.modal-panel {
  border-radius: 16px; /* Modals often have a slightly larger radius */
}

.is-pomodoro-active {
  background-color: var(--glass-bg-active) !important;
  border-color: var(--accent-purple) !important;
  box-shadow: var(--glass-sheen), var(--glass-shadow), 0 0 15px -3px var(--accent-purple);
}

.scroller-highlight-glow {
  box-shadow: 0 0 15px -5px var(--accent-purple);
}

/* --- Scrollbar Styling --- */
::-webkit-scrollbar { width: 12px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb {
  background-color: rgba(255, 255, 255, 0.2);
  border-radius: 10px;
  border: 3px solid transparent;
  background-clip: content-box;
}
::-webkit-scrollbar-thumb:hover { background-color: rgba(255, 255, 255, 0.3); }
.no-scrollbar::-webkit-scrollbar { display: none; }
.no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

/* --- Sidebar, Header, and other UI Chrome --- */
.bg-\[\--background-secondary\] { /* Overriding Tailwind class */
  background-color: var(--glass-bg-chrome) !important;
  -webkit-backdrop-filter: var(--glass-backdrop-filter);
  backdrop-filter: var(--glass-backdrop-filter);
  border-radius: 0;
  box-shadow: none;
}
.border-\[\--separator-primary\] {
  border-color: var(--separator-primary) !important;
}

/* --- Sidebar Specifics --- */
.sidebar-content-area {
  padding: 1rem 1.25rem;
  padding-left: calc(1rem + env(safe-area-inset-left));
  padding-top: calc(1rem + env(safe-area-inset-top));
  padding-bottom: calc(1.5rem + env(safe-area-inset-bottom));
}

/* --- Buttons --- */
.button-base {
  border: none;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
}
.button-primary {
  background-color: var(--accent-purple);
  color: #fff;
}
.button-primary:hover:not(:disabled) { background-color: color-mix(in srgb, var(--accent-purple), #fff 15%); }

.button-secondary {
  background-color: var(--button-secondary-bg);
  border: 1px solid var(--glass-border-color);
}
.button-secondary:hover:not(:disabled) { background-color: var(--button-secondary-hover-bg); }

.button-danger {
  background-color: var(--accent-red);
  color: #fff;
}
.button-danger:hover:not(:disabled) { background-color: color-mix(in srgb, var(--accent-red), #fff 15%); }

.button-ghost { background-color: transparent; box-shadow: none; border: none; }
.button-ghost:hover:not(:disabled) { background-color: rgba(191, 90, 242, 0.15); }

/* --- Inputs & Selects --- */
.input-base {
  width: 100%;
  padding: 0.5rem 0.75rem;
  background-color: var(--input-bg);
  border: 1px solid var(--input-border);
  border-radius: 0.5rem;
  color: var(--text-primary);
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}
.input-base:focus {
  outline: none;
  border-color: var(--accent-purple);
  box-shadow: 0 0 0 2px rgba(191, 90, 242, 0.3);
}

/* --- Task Item & Resource Lists --- */
.topic-list-item.is-dragging {
  background-color: color-mix(in srgb, var(--accent-purple), #000 50%);
  opacity: 1;
}
.resource-card.is-selected {
  background-color: color-mix(in srgb, var(--accent-purple), transparent 70%);
  border-color: var(--accent-purple);
}
.resource-card.is-highlighted {
  background-color: color-mix(in srgb, var(--accent-yellow), transparent 85%);
}

/* --- Progress Bar --- */
.progress-bar-track { background-color: rgba(0,0,0,0.3); border-radius: 999px;}
.progress-bar-fill {
  height: 100%;
  border-radius: inherit;
  background-image: linear-gradient(45deg, var(--accent-purple), color-mix(in srgb, var(--accent-purple), #fff 30%));
}

/* --- iOS Style Toggle Switch --- */
.ios-switch { position: relative; display: inline-block; width: 44px; height: 26px; }
.ios-switch input { opacity: 0; width: 0; height: 0; }
.ios-switch .slider {
    position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
    background-color: #3e3e42; transition: .4s; border-radius: 34px;
}
.ios-switch .slider:before {
    position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px;
    background-color: white; transition: .4s; border-radius: 50%;
}
.ios-switch input:checked + .slider { background-color: var(--accent-purple); }
.ios-switch.yellow input:checked + .slider { background-color: var(--accent-yellow); }
.ios-switch input:focus + .slider { box-shadow: 0 0 1px var(--accent-purple); }
.ios-switch input:checked + .slider:before { transform: translateX(18px); }

/* --- Tiny Text Size --- */
.text-xxs { font-size: 0.65rem; line-height: 0.9rem; }

/* --- Overrides for Light Theme Remnants --- */
.bg-white { background-color: var(--glass-bg-active) !important; }
.text-black { color: var(--text-primary) !important; }

/* --- Printing Styles --- */
@media print {
  body {
    background-image: none;
    background-color: white;
    color: black;
  }
  .print\:hidden { display: none; }
  .hidden.print\:block { display: block; }
  @page {
    size: letter;
    margin: 0.75in;
  }
  .schedule-report-container {
    font-family: 'Times New Roman', Times, serif;
    font-size: 10pt;
  }
  .schedule-report-day {
    break-inside: avoid-page;
  }
  .new-week-page-break {
    break-before: page;
  }
}